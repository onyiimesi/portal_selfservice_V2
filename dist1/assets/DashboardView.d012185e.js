import{_ as b,a as h,o as l,c as n,b as s,d as o,w as d,e as p,f as v,n as u,F as g,r as f,t as r,g as _,h as y,H as w,i as x}from"./index.bf299c13.js";import{h as k}from"./html2pdf.efbb8891.js";const D={name:"invoices",data(){return{errors:[],message:[],customer:"",customers:"",allinvoice:[],loaderDiv:"",mainDiv:"d-none",refresh:"",interval:null}},created(){this.customer=localStorage.getItem("accesstoken"),this.customer||this.$router.push("/")},async mounted(){this.customer=localStorage.getItem("accesstoken"),this.refresh=localStorage.getItem("refreshtoken"),this.customers=localStorage.getItem("customercode");const t=await h.get("api/Invoice/customerinvoices/"+this.customers,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allinvoice=t.data.result,this.loaderDiv="d-none",this.mainDiv="",this.tokenRefresh()},computed:{total:function(){let t=[];return Object.entries(this.items).forEach(([c,e])=>{t.push(e.amount)}),t.reduce(function(c,e){return c+e},0)},tax:function(){let t=[];return Object.entries(this.items).forEach(([c,e])=>{t.push(e.tax)}),t.reduce(function(c,e){return c+e},0)}},methods:{async tokenRefresh(){await h.post("https://assessmentapi.revassuredev.com/api/user/refreshtoken",{access_Token:this.customer,refresh_Token:this.refresh})},exportToPDF(){k(document.getElementById("element-to-convert"),{margin:1,filename:"revassuredev-invoice.pdf",html2canvas:{windowWidth:100,windowHeight:100},pagebreak:{mode:"avoid-all",before:".page2el"}})},async makePayment(){this.message=[];const t=await h.post("https://assessmentapi.revassuredev.com/api/Payment/initialize/",{invoiceCode:this.invoice.invoiceCode,callBackUrl:"https://revassuredev.com/payment-verify/"+this.invoice.invoiceCode},{headers:{clientid:"abc123",Authorization:"0*EI&LBEey28Y#p1e3qmVD"}});t&&(this.message.push(t.data.message),window.location.href=t.data.result.authorization_url)},handleClick(){localStorage.removeItem("customercode"),this.$router.push("/")}},created(){this.interval=setInterval(()=>{this.tokenRefresh()},5*60*1e3)},destroyed(){clearInterval(this.interval)}},N={class:"content-wrapper"},C={class:"wrapper image-wrapper bg-image bg-overlay bg-overlay-400 text-white","data-image-src":"/assets/img/photos/bg3.jpg"},I={class:"container pt-15 pb-10 pt-md-17 pb-md-10 text-center"},S={class:"row"},V={class:"col-md-10 col-lg-8 col-xl-7 col-xxl-6 mx-auto"},$=s("h1",{class:"display-1 mb-3 text-white"},"Dashboard",-1),z={class:"d-inline-block","aria-label":"breadcrumb"},B={class:"breadcrumb text-white"},O={key:0,class:"breadcrumb-item"},R={key:1,class:"breadcrumb-item"},A=s("li",{class:"breadcrumb-item active","aria-current":"page"},"Dashboard",-1),F={class:"container"},E=_('<div class="row pt-5"><div class="col-md-6 mb-4"><div class="card border border-secondary"><div class="row"><div class="col-md-12"><div class="tt"><h3 class="pt-2 ps-2"><span style="font-size:18px;">(\u20A6)</span> Naira</h3></div></div></div><div class="row pt-2 ps-5 pe-2 pb-2"><div class="col-md-4 mb-1 pe-3 pt-0 ps-0 pb-0"><div class="card bg-primary text-white"><div class="card-body pe-4 ps-4"><span>\u20A6 0,000,000.00</span><h2 class="fs-15 text-uppercase text-white">Invoices</h2></div></div></div><div class="col-md-4 mb-1 pe-3 pt-0 ps-0 pb-0"><div class="card bg-success text-white"><div class="card-body pe-4 ps-4"> \u20A6 0,000,000.00 <h2 class="fs-15 text-uppercase text-white">Payments</h2></div></div></div><div class="col-md-4 mb-1 pe-3 pt-0 ps-0 pb-0"><div class="card bg-danger text-white"><div class="card-body pe-4 ps-4"> \u20A6 0,000,000.00 <h2 class="fs-15 text-uppercase text-white">Outstanding</h2></div></div></div></div></div></div><div class="col-md-6"><div class="card border border-secondary"><div class="row"><div class="col-md-12"><div class="tt"><h3 class="pt-2 ps-2"><span style="font-size:18px;">($)</span> Dollar</h3></div></div></div><div class="row pt-2 ps-5 pe-2 pb-2"><div class="col-md-4 mb-1 pe-3 pt-0 ps-0 pb-0"><div class="card bg-primary text-white"><div class="card-body pe-4 ps-4"> $ 0,000,000.00 <h2 class="fs-15 text-uppercase text-white">Invoices</h2></div></div></div><div class="col-md-4 mb-1 pe-3 pt-0 ps-0 pb-0"><div class="card bg-success text-white"><div class="card-body pe-4 ps-4"> $ 0,000,000.00 <h2 class="fs-15 text-uppercase text-white">Payments</h2></div></div></div><div class="col-md-4 mb-1 pe-3 pt-0 ps-0 pb-0"><div class="card bg-danger text-white"><div class="card-body pe-4 ps-4"> $ 0,000,000.00 <h2 class="fs-15 text-uppercase text-white">Outstanding</h2></div></div></div></div></div></div></div>',1),P={class:"row pt-8"},H={class:"col-md-12"},L={class:"card border border-info"},T={class:"card-body table-responsive"},j=s("h3",{class:"pb-4"},"Recent Payments",-1),G={class:"table table-bordered table-striped table-hover"},M=s("thead",{class:"thead-dark"},[s("tr",null,[s("th",{scope:"col"},"Organization"),s("th",{scope:"col"},"Receipt No"),s("th",{scope:"col"},"Bill No"),s("th",{scope:"col"},"Currency"),s("th",{scope:"col"},"Amount"),s("th",{scope:"col"},"Outstanding"),s("th",{scope:"col"},"Action")])],-1),q=s("td",null,"Ministry of Finance",-1),U=s("td",null,"2345512",-1),W=s("td",null,"#33452",-1),Y=s("td",null,"NGN",-1),J=s("td",null,"20,000",-1),K=s("td",null,"0.00",-1),Q=s("button",{class:"btn btn-success btn-sm"},"View",-1),X=s("td",null,"Ministry of Finance",-1),Z=s("td",null,"2345512",-1),ss=s("td",null,"#33452",-1),ts=s("td",null,"NGN",-1),es=s("td",null,"20,000",-1),os=s("td",null,"0.00",-1),cs=s("button",{class:"btn btn-success btn-sm"},"View",-1),is=s("td",null,"Ministry of Finance",-1),as=s("td",null,"2345512",-1),ds=s("td",null,"#33452",-1),ls=s("td",null,"NGN",-1),ns=s("td",null,"20,000",-1),rs=s("td",null,"0.00",-1),hs=s("button",{class:"btn btn-success btn-sm"},"View",-1),ps={class:"row pt-10 pb-10"},vs={class:"col-md-12"},us={class:"card border border-info"},_s={class:"card-body table-responsive"},ms=s("h3",{class:"pb-4"},"Recent Bills",-1),bs=_('<div class="ph-item"><div class="ph-col-12"><div class="ph-row"><div class="ph-col-4"></div><div class="ph-col-8 empty"></div><div class="ph-col-6"></div><div class="ph-col-6 empty"></div><div class="ph-col-12"></div><div class="ph-col-12"></div><div class="ph-col-12"></div><div class="ph-col-12"></div></div></div><div class="ph-col-12"><div class="ph-row"><div class="ph-col-4"></div><div class="ph-col-8 empty"></div><div class="ph-col-6"></div><div class="ph-col-6 empty"></div><div class="ph-col-12"></div><div class="ph-col-12"></div><div class="ph-col-12"></div><div class="ph-col-12"></div></div></div></div>',1),gs=[bs],fs={class:"table table-bordered table-striped table-hover"},ys=s("thead",{class:"thead-dark"},[s("tr",null,[s("th",{scope:"col"},"Organization"),s("th",{scope:"col"},"#Invoice"),s("th",{scope:"col"},"Currency"),s("th",{scope:"col"},"Amount"),s("th",{scope:"col"},"Outstanding"),s("th",{scope:"col"},"Status"),s("th",{scope:"col"},"Action")])],-1),ws=s("td",null,null,-1),xs=s("button",{class:"btn btn-success btn-sm"},"View",-1),ks=s("div",{class:"row pt-5"},null,-1);function Ds(t,c,e,Cs,m,Is){const a=y("RouterLink");return l(),n("div",N,[s("section",C,[s("div",I,[s("div",S,[s("div",V,[$,s("nav",z,[s("ol",B,[this.customer?(l(),n("li",O,[o(a,{to:"/dashboard"},{default:d(()=>[p("Home")]),_:1})])):v("",!0),this.customer?v("",!0):(l(),n("li",R,[o(a,{to:"/"},{default:d(()=>[p("Home")]),_:1})])),A])])])])])]),s("div",F,[E,s("div",P,[s("div",H,[s("div",L,[s("div",T,[j,s("table",G,[M,s("tbody",null,[s("tr",null,[q,U,W,Y,J,K,s("td",null,[o(a,{to:"/"},{default:d(()=>[Q]),_:1})])]),s("tr",null,[X,Z,ss,ts,es,os,s("td",null,[o(a,{to:"/"},{default:d(()=>[cs]),_:1})])]),s("tr",null,[is,as,ds,ls,ns,rs,s("td",null,[o(a,{to:"/"},{default:d(()=>[hs]),_:1})])])])])])])])]),s("div",ps,[s("div",vs,[s("div",us,[s("div",_s,[ms,s("div",{class:u(this.loaderDiv)},gs,2),s("div",{class:u(this.mainDiv)},[s("table",fs,[ys,s("tbody",null,[(l(!0),n(g,null,f(m.allinvoice,i=>(l(),n("tr",{key:i.id},[s("td",null,r(i.organisationCode),1),s("td",null,r(i.invoiceCode),1),s("td",null,r(i.currencyCode),1),s("td",null,r(Number(i.invoiceAmount).toLocaleString()),1),ws,s("td",null,r(i.paymentStatus),1),s("td",null,[o(a,{to:"/view-bill/"+i.invoiceCode},{default:d(()=>[xs]),_:2},1032,["to"])])]))),128))])])],2)])])])]),ks])])}const Ns=b(D,[["render",Ds]]),$s={__name:"DashboardView",setup(t){return(c,e)=>(l(),n("main",null,[o(w),o(Ns),o(x)]))}};export{$s as default};
