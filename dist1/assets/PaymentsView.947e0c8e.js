import{_ as m,a as d,o as i,c as r,b as e,d as n,w as u,e as _,F as p,r as v,t as c,h as b,H as g,i as f}from"./index.bf299c13.js";import{h as y}from"./html2pdf.efbb8891.js";const w={name:"invoices",data(){return{errors:[],message:[],customerCode:"",allinvoice:[]}},created(){const t=localStorage.getItem("accesstoken");this.customerCode=t,this.customerCode||this.$router.push("/signin")},async mounted(){this.customerCode=localStorage.getItem("accesstoken");const t=await d.get("api/Invoice/customerinvoices/"+this.$route.params.customerCode,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});this.allinvoice=t.data.result},computed:{total:function(){let t=[];return Object.entries(this.items).forEach(([s,o])=>{t.push(o.amount)}),t.reduce(function(s,o){return s+o},0)},tax:function(){let t=[];return Object.entries(this.items).forEach(([s,o])=>{t.push(o.tax)}),t.reduce(function(s,o){return s+o},0)}},methods:{exportToPDF(){y(document.getElementById("element-to-convert"),{margin:1,filename:"revassuredev-invoice.pdf",html2canvas:{windowWidth:100,windowHeight:100},pagebreak:{mode:"avoid-all",before:".page2el"}})},async makePayment(){this.message=[];const t=await d.post("https://assessmentapi.revassuredev.com/api/Payment/initialize/",{invoiceCode:this.invoice.invoiceCode,callBackUrl:"https://revassuredev.com/payment-verify/"+this.invoice.invoiceCode},{headers:{clientid:"abc123",Authorization:"0*EI&LBEey28Y#p1e3qmVD"}});t&&(this.message.push(t.data.message),window.location.href=t.data.result.authorization_url)},handleClick(){localStorage.removeItem("customercode"),this.$router.push("/")}}},x={class:"content-wrapper"},C={class:"wrapper image-wrapper bg-image bg-overlay bg-overlay-400 text-white","data-image-src":"/assets/img/photos/bg3.jpg"},k={class:"container pt-15 pb-10 pt-md-17 pb-md-10 text-center"},P={class:"row"},B={class:"col-md-10 col-lg-8 col-xl-7 col-xxl-6 mx-auto"},I=e("h1",{class:"display-1 mb-3 text-white"},"Payments",-1),$={class:"d-inline-block","aria-label":"breadcrumb"},E={class:"breadcrumb text-white"},L={class:"breadcrumb-item"},N=e("li",{class:"breadcrumb-item active","aria-current":"page"},"Payments",-1),S={class:"container"},V=e("div",{class:"row pt-5"},[e("div",{class:"col-md-12"},[e("h2",null,"List of Payments")])],-1),z={class:"row pt-5 pb-10"},A={class:"col-md-12"},F={class:"card border border-info"},H={class:"card-body table-responsive"},O=e("h3",null,"Payments",-1),j={class:"table table-bordered table-striped table-hover"},D=e("thead",{class:"thead-dark"},[e("tr",null,[e("th",{scope:"col"},"Organization"),e("th",{scope:"col"},"Receipt No"),e("th",{scope:"col"},"Bill No"),e("th",{scope:"col"},"Currency"),e("th",{scope:"col"},"Amount"),e("th",{scope:"col"},"Outstanding"),e("th",{scope:"col"},"Action")])],-1),R=e("td",null,null,-1),T=e("button",{class:"btn btn-success btn-sm"},"View",-1),q=e("div",{class:"row pt-5"},null,-1);function U(t,s,o,Y,h,G){const l=b("RouterLink");return i(),r("div",x,[e("section",C,[e("div",k,[e("div",P,[e("div",B,[I,e("nav",$,[e("ol",E,[e("li",L,[n(l,{to:"/dashboard"},{default:u(()=>[_("Home")]),_:1})]),N])])])])])]),e("div",S,[V,e("div",z,[e("div",A,[e("div",F,[e("div",H,[O,e("table",j,[D,e("tbody",null,[(i(!0),r(p,null,v(h.allinvoice,a=>(i(),r("tr",{key:a.id},[e("td",null,c(a.organisationCode),1),e("td",null,c(a.invoiceCode),1),e("td",null,c(a.invoiceCode),1),e("td",null,c(a.currencyCode),1),e("td",null,c(Number(a.invoiceAmount).toLocaleString()),1),R,e("td",null,[n(l,{to:"/view-bill/"+a.invoiceCode},{default:u(()=>[T]),_:2},1032,["to"])])]))),128))])])])])])]),q])])}const W=m(w,[["render",U]]),M={__name:"PaymentsView",setup(t){return(s,o)=>(i(),r("main",null,[n(g),n(W),n(f)]))}};export{M as default};
